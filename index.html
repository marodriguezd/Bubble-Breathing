<!DOCTYPE html>
<html lang="en" data-theme="light"> <!-- Attribute to control the theme -->
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
    />
    <title>Bubble Breathing</title>
    <meta name="theme-color" content="#2c5f5d" />
    
    <!-- SVG Icon -->
    <link rel="icon" href="assets/icon.svg" type="image/svg+xml">
    <link rel="apple-touch-icon" href="assets/icon.svg">
    
    <!-- PWA Configuration -->
    <link rel="manifest" href="manifest.json">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Bubble Breathing">
    <meta name="msapplication-TileColor" content="#2c5f5d">
    <meta name="msapplication-TileImage" href="assets/icon.svg">
    
    <link rel="stylesheet" href="css/style.css" />
  </head>
  <body>
    <div class="container">
      <div class="header">
        <div class="lang-container">
          <div class="lang-selector">
            <button class="lang-toggle" id="langToggle">
              <span class="lang-flag" id="langFlag">ðŸ‡¬ðŸ‡§</span>
              <span id="langCode">EN</span>
            </button>
            <div class="lang-dropdown" id="langDropdown">
              <button class="lang-option" data-lang="en">
                <span class="lang-flag">ðŸ‡¬ðŸ‡§</span>
                <span>English</span>
              </button>
              <button class="lang-option" data-lang="es">
                <span class="lang-flag">ðŸ‡ªðŸ‡¸</span>
                <span>EspaÃ±ol</span>
              </button>
              <button class="lang-option" data-lang="fr">
                <span class="lang-flag">ðŸ‡«ðŸ‡·</span>
                <span>FranÃ§ais</span>
              </button>
              <button class="lang-option" data-lang="it">
                <span class="lang-flag">ðŸ‡®ðŸ‡¹</span>
                <span>Italiano</span>
              </button>
              <button class="lang-option" data-lang="de">
                <span class="lang-flag">ðŸ‡©ðŸ‡ª</span>
                <span>Deutsch</span>
              </button>
              <button class="lang-option" data-lang="pt">
                <span class="lang-flag">ðŸ‡µðŸ‡¹</span>
                <span>PortuguÃªs</span>
              </button>
              <button class="lang-option" data-lang="zh">
                <span class="lang-flag">ðŸ‡¨ðŸ‡³</span>
                <span>ç®€ä½“ä¸­æ–‡</span>
              </button>
            </div>
          </div>
          <div class="lang-overlay" id="langOverlay"></div>
        </div>
        <h1 id="headerTitle">Bubble Breathing</h1>
        <div id="progressBar"><div id="progressFill"></div></div>
        <!-- ADDED THEME BUTTON -->
        <button class="theme-toggle-btn" id="themeToggleBtn" title="Change theme">ðŸŒ™</button>
        <button class="finish-btn hidden" id="finishBtn">Finish</button>
      </div>

      <!-- CONFIGURATION SCREEN -->
      <div id="configScreen" class="screen active">
        <div class="hexagon-container">
          <div class="hexagon phase-breathing" id="previewHexagon">
            <div class="breath-counter" id="previewCounter">1</div>
          </div>
        </div>
        <div class="preview-label" id="previewLabel">Breathing Preview</div>
        <div class="speed-selector">
          <button class="speed-btn" data-speed="slow" id="speedSlow">
            Slow
          </button>
          <button
            class="speed-btn active"
            data-speed="standard"
            id="speedStandard"
          >
            Standard
          </button>
          <button class="speed-btn" data-speed="fast" id="speedFast">
            Fast
          </button>
        </div>
        <div class="slider-group">
          <label for="roundsSlider">
            <span class="slider-label" id="roundsLabel">Rounds:</span>
            <span id="roundsValue">3</span>
          </label>
          <input
            type="range"
            id="roundsSlider"
            min="1"
            max="11"
            value="3"
            class="slider"
          />
        </div>
        <div class="slider-group">
          <label for="breathsSlider">
            <span class="slider-label" id="breathsLabel">Breaths:</span>
            <span id="breathsValue">30</span>
          </label>
          <input
            type="range"
            id="breathsSlider"
            min="5"
            max="60"
            step="5"
            value="30"
            class="slider"
          />
        </div>
        <div class="slider-group">
          <label for="volumeSlider">
            <span class="slider-label" id="volumeLabel">Volume:</span>
            <span id="volumeValue">25</span>%
          </label>
          <input
            type="range"
            id="volumeSlider"
            min="0"
            max="0.5"
            step="0.05"
            value="0.25"
            class="slider"
          />
        </div>
        <div class="estimated-time">
          <span data-translate="estimated_time">Estimated time</span>: <span id="estimated-time"></span>
        </div>
        <div class="config-buttons">
          <button class="reset-config-btn" id="resetConfigBtn">Reset</button>
          <button class="start-button" id="startButton">Start</button>
        </div>
      </div>

      <!-- EXERCISE AND RETENTION SCREEN -->
      <div id="exerciseScreen" class="screen">
        <div class="round-info" id="roundInfo">Round 1 / 3</div>
        <div class="instruction" id="exerciseInstruction">
          Take 30 deep breaths
        </div>
        <div class="hexagon-container">
          <div class="hexagon phase-breathing" id="exerciseHexagon">
            <div class="breath-counter" id="breathCounter">1</div>
          </div>
        </div>
        <button class="skip-button" id="skipToRetentionBtn">
          Skip to breath hold
        </button>
        <button class="skip-button" id="skipRecoveryBtn" style="display: none">
          Skip recovery
        </button>
        <div
          class="recovery-subtitle"
          id="recoverySubtitle"
          style="display: none"
        ></div>
      </div>

      <div id="retentionScreen" class="screen">
        <div class="round-info" id="retentionRoundInfo">Round 1 / 3</div>
        <div class="instruction" id="retentionInstruction">
          Hold your breath
        </div>
        <div class="retention-timer" id="retentionTimer">00:00</div>
        <div class="hexagon-container">
          <div class="hexagon phase-retention" id="retentionHexagon">
            <div class="breath-counter">â– </div>
          </div>
        </div>
        <div class="tap-instruction" id="retentionTapInstruction">
          Tap when you need to breathe
        </div>
      </div>

      <!-- RESULTS SCREEN -->
      <div id="resultsScreen" class="screen">
        <div class="results-title" id="resultsTitle">Session Results</div>
        <div id="resultsContent"></div>
        <button class="start-button" id="newSessionBtn">New Session</button>
      </div>
    </div>

    <!-- Load translations BEFORE the main script -->
    <script src="js/translations.js"></script>
    <script src="js/script.js" defer></script>
  </body>
</html>
