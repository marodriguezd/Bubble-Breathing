:root {
  --color-bg:#f5f7fa;
  --color-card:#fff;
  --color-primary:#2c5f5d;
  --color-accent:#ff9500;
  --color-secondary:#3498db;
  --color-success:#27ae60;
  --color-danger:#e74c3c;
  --color-text:#2c3e50;
  --color-muted:#7f8c8d;
  --color-border:#e0e6ed;
}

*{margin:0;padding:0;box-sizing:border-box}

/* CLAVE 1: El motor de escalado. Si la pantalla es corta, todo se encoge. */
html {
  font-size: clamp(11px, 2.5vmin, 16px);
}

body{
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,sans-serif;
  background:var(--color-bg);
  color:var(--color-text);
  -webkit-tap-highlight-color: transparent;
  /* La siguiente línea es crucial para una sensación de app nativa */
  overflow: hidden; 
  height: 100vh;
}

/* CLAVE 2: El contenedor maestro. Un flexbox columnar que ocupa toda la pantalla. */
.container{
  background:var(--color-card);
  width: 100%;
  height: 100%; /* Ocupa el 100% de su padre (body) */
  display:flex;
  flex-direction:column;
}

.header{
  background:var(--color-primary);
  color:#fff;
  padding: 1.5rem 1rem 1rem;
  padding-top: calc(1.5rem + env(safe-area-inset-top));
  text-align:center;
  position:relative;
  flex-shrink: 0; /* Evita que el header se encoja */
}

.header h1{font-size:1.2rem;font-weight:500}
#progressBar{height:0.1875rem;background:rgba(255,255,255,.3);border-radius:0.1875rem;margin-top:1rem}
#progressFill{height:100%;background:#fff;width:0;transition:width .3s}
.finish-btn{position:absolute;right:1rem;top: calc(50% + env(safe-area-inset-top)/2);transform:translateY(-50%);background:rgba(255,255,255,.2);border:none;color:#fff;padding:0.5rem 1rem;border-radius:1.25rem;font-size:0.9rem;cursor:pointer}
.finish-btn.hidden{display: none;}
.lang-container{position:absolute;left:1rem;top: calc(50% + env(safe-area-inset-top)/2);transform:translateY(-50%);display:flex;flex-direction:column;align-items:center}
.lang-toggle{background:rgba(255,255,255,.2);border:none;color:#fff;padding:0.3rem 0.6rem;border-radius:0.9375rem;font-size:0.8rem;cursor:pointer;font-weight:600;margin-bottom:0.125rem}

/* CLAVE 3: El 'fuelle' flexible. Crece para llenar el espacio y distribuye su contenido. */
.screen{
  display: none; /* Oculto por defecto */
  flex-direction: column;
  width: 100%;
  max-width: 28rem;
  margin: 0 auto;
  padding: 1.5rem;
  padding-bottom: calc(1.5rem + env(safe-area-inset-bottom));
  text-align: center;
}

.screen.active {
  display: flex;
  flex-grow: 1; /* Le dice que crezca y ocupe el espacio sobrante */
  justify-content: space-evenly; /* Reparte sus hijos de forma equitativa */
}

.hexagon-container{margin: 0 auto;width:9.375rem;height:9.375rem;position:relative}
.hexagon{width:9.375rem;height:8.125rem;display:flex;align-items:center;justify-content:center;clip-path:polygon(50% 0%,100% 25%,100% 75%,50% 100%,0% 75%,0% 25%);transition:transform .3s;will-change:transform}
.hexagon:active{transform:scale(.96)}
.phase-breathing{background:linear-gradient(135deg,#ff9500,#ff6b00)}
.phase-retention{background:linear-gradient(135deg,#e74c3c,#c0392b);cursor:pointer}
.phase-recovery{background:linear-gradient(135deg,#27ae60,#2ecc71)}
.breath-counter{font-size:3rem;font-weight:700;color:#fff;text-shadow:0 0.125rem 0.25rem rgba(0,0,0,.3)}

.speed-selector{display:flex;justify-content:center;gap: 1rem;width: 100%;}
.speed-btn{flex-grow: 1;flex-basis: 30%;padding:0.7rem;border:0.125rem solid var(--color-border);border-radius:1.25rem;background:transparent;cursor:pointer;font-weight:600;transition:all .3s}
.speed-btn.active{background:var(--color-primary);color:#fff;border-color:var(--color-primary)}

.slider-group{padding:0 1rem;}
.slider-group label{display:flex;justify-content:space-between;font-weight:600;margin-bottom:0.5rem}
.slider{-webkit-appearance:none;width:100%;height:0.375rem;border-radius:0.1875rem;background:var(--color-border);outline:none}
.slider::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:1.375rem;height:1.375rem;border-radius:50%;background:var(--color-primary);cursor:pointer}
.slider::-moz-range-thumb{width:1.375rem;height:1.375rem;border-radius:50%;background:var(--color-primary);cursor:pointer;border:none}

/* El botón ya no necesita trucos. Es una 'tecla' más en el 'acordeón'. */
.start-button{
  background:var(--color-primary);
  color:#fff;
  border:none;
  padding:1.1rem;
  width:100%;
  margin: 0 auto;
  border-radius:1.5rem;
  font-size:1.1rem;
  font-weight:600;
  cursor:pointer;
  transition:all .3s
}

.start-button:hover{background:#1e4240;transform:translateY(-1px)}
.round-info{font-size:1.1rem;color:var(--color-muted)}
.instruction{font-size:1.3rem;font-weight:600;}
.retention-timer{font-size:4rem;font-weight:700;color:var(--color-primary);}
.tap-instruction{color:var(--color-muted)}
.result-item{display:flex;justify-content:space-between;padding:1rem;margin:0.5rem 0;background:#f8f9fa;border-radius:0.625rem}
.result-item.highlight{background:#e8f5e8;border-left:0.25rem solid var(--color-success)}
.results-title{font-size: 1.5rem; font-weight: 600; margin-bottom: 1.5rem;}
.preview-label{font-size:0.9rem;color:var(--color-muted);margin-top:0.25rem;}
.recovery-subtitle{font-size:1.2rem;color:var(--color-primary);font-weight:600;margin-top:0.5rem;}
.skip-button{background:var(--color-secondary);color:#fff;border:none;padding:0.8rem 1.5rem;margin-top:1rem;border-radius:1.25rem;font-size:1rem;font-weight:600;cursor:pointer;transition:all .3s;opacity:0.9;}
.skip-button:hover{background:#2980b9;opacity:1;transform:translateY(-1px);}